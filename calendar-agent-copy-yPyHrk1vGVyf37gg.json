{"createdAt":"2025-08-13T10:00:40.071Z","updatedAt":"2025-08-13T10:00:40.071Z","id":"yPyHrk1vGVyf37gg","name":"Calendar agent copy","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"bcf28c6a-0dba-49c6-8de5-bd8fece21235","responseMode":"lastNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"id":"4e9f95de-48a0-4b0b-9a86-be290b63c54b","name":"Webhook","webhookId":"bcf28c6a-0dba-49c6-8de5-bd8fece21235"},{"parameters":{"modelId":{"__rl":true,"value":"chatgpt-4o-latest","mode":"list","cachedResultName":"CHATGPT-4O-LATEST"},"messages":{"values":[{"content":"=🧩 **Tvé úkoly v pořadí:**\n\n1. **Normalizuj text** – oprav gramatiku a rozpoznatelné překlepy, které dávají smysl.\n2. **Analyzuj význam** – pochop, co se má stát: kdo, co, kdy, kde, proč.\n3. **Extrahuj detailní informace pro kalendář**:\n   - title: co se má stát (max 60 znaků, přirozený jazyk)\n   - description: další poznámky nebo volné informace\n   - start: kdy má událost začít (ve formátu YYYY-MM-DDTHH:MM:SS)\n   - end: kdy má skončit (stejný formát)\n   - location: pokud je zmíněno místo (např. \"u doktora\", \"v kanceláři\")\n   - attendees: seznam osob, pokud jsou uvedeny (např. \"Tereza\", \"klient\")\n   - allDay: true/false – pokud se nejedná o konkrétní čas\n\n---\n\n📌 **Pravidla a kontext:**\n\n- Pokud není čas uveden → výchozí začátek je 10:00\n- Pokud není konec uveden → nastav end jako 30 minut po start\n- Pokud je řečeno \"do [čas]\" → použij jako end, ale start hledej dříve v textu nebo defaultně\n- Pokud je pouze datum (např. \"zítra\", \"v pondělí\") → nastav čas jako 10:00\n- Pokud je zmíněno \"po obědě\", \"večer\", \"ráno\", \"dopoledne\" → použij přibližné časy:\n  - ráno: 08:30, dopoledne: 10:00, po obědě: 13:00, večer: 18:00\n- Datum konvertuj podle lokálního času Europe/Prague\n- Nepřidávej žádný text okolo – výstup musí být **čistý, validní JSON objekt**\n\n---\n\n📦 **Příklad výstupu:**\njson\n{\n  \"title\": \"Kontrola u doktora\",\n  \"description\": \"Krevní tlak, zůstat do 12:00\",\n  \"start\": \"2025-07-07T10:00:00\",\n  \"end\": \"2025-07-07T12:00:00\",\n  \"location\": \"Ordinace\",\n  \"attendees\": [],\n  \"allDay\": yes\n}\n\n\n\nVSTUP: {{ $json.body.message }}\nDNEŠNÍ DATUM JE: {{ $today }}"}]},"jsonOutput":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[220,0],"id":"81f972cb-dd0e-4250-99a8-f34a9a704fc9","name":"OpenAI"},{"parameters":{"calendar":{"__rl":true,"value":"04.novotny.martin@gmail.com","mode":"list","cachedResultName":"04.novotny.martin@gmail.com"},"start":"={{ $json.message.content.start }}","end":"={{ $json.message.content.end }}","useDefaultReminders":false,"additionalFields":{"description":"={{ $json.message.content.description }}","summary":"={{ $json.message.content.title }}"},"remindersUi":{"remindersValues":[{"method":"popup","minutes":1440},{"method":"popup","minutes":120}]}},"type":"n8n-nodes-base.googleCalendar","typeVersion":1.3,"position":[600,0],"id":"85d05da9-5312-4c2e-ae93-cdb41197f62b","name":"Google Calendar"}],"connections":{"Webhook":{"main":[[{"node":"OpenAI","type":"main","index":0}]]},"OpenAI":{"main":[[{"node":"Google Calendar","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"b5f488db-58f7-4160-8860-756694f8f943","triggerCount":0,"shared":[{"createdAt":"2025-08-13T10:00:40.074Z","updatedAt":"2025-08-13T10:00:40.074Z","role":"workflow:owner","workflowId":"yPyHrk1vGVyf37gg","projectId":"zpk8zHoHWXf3cQ7T"}],"tags":[]}